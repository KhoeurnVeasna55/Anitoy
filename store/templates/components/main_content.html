{% load static %}
<main>
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center g-5">
                <div class="col-lg-6">
                    <span class="hero-badge">✨ New Collection Available</span>
                    <h1 class="hero-title">Collect What You Love</h1>
                    <p class="hero-description">
                        Discover rare figures, adorable plushies, and limited edition collectibles. Your next treasure
                        awaits.
                    </p>
                    <div class="hero-cta d-flex gap-3 flex-wrap">
                        <a href="#arrivals" class="btn-primary-hero">
                            Shop New Drops <i class="bi bi-arrow-right"></i>
                        </a>
                        <a href="{% url 'home' %}" class="btn-outline-hero">Browse All</a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div id="heroCarousel" class="carousel slide carousel-fade hero-carousel" data-bs-ride="carousel"
                         data-bs-interval="3500" data-bs-pause="hover">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"
                                    aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"
                                    aria-label="Slide 2"></button>
                        </div>

                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{% static 'img/banner/61BZzrj1feL._AC_SL1300_.jpg' %}"
                                     class="d-block w-100" alt="Collectibles 1">
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'img/banner/81aQmjff2kL._AC_SL1500_.jpg' %}"
                                     class="d-block w-100" alt="Collectibles 2">
                            </div>
                            <div class="carousel-item">
                                <img src="{% static 'img/banner/81ZaQfb++GL._AC_SL1500_.jpg' %}"
                                     class="d-block w-100" alt="Collectibles 3">
                            </div>
                        </div>

                        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel"
                                data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel"
                                data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dynamic Product Section -->
    <section class="arrivals-section py-5" id="arrivals">
        <div class="container">
            <div class="section-header d-flex justify-content-between align-items-end mb-4">
                <div>
                    <h2 class="section-title">
                        {% if current_cat %}
                        {{ current_cat.name }}
                        {% else %}
                        New & Popular
                        {% endif %}
                        {% if q %}
                        <small class="text-muted fw-normal">— “{{ q }}”</small>
                        {% endif %}
                    </h2>
                    <p class="section-subtitle">Fresh collectibles just added to our store</p>
                </div>
                <a href="{% url 'home' %}" class="view-all-link">View All <i class="bi bi-arrow-right"></i></a>
            </div>

            {% if products %}
            <div class="row g-4">
                {% for product in products %}
                <div class="col-6 col-md-4 col-lg-3">
                    {% include "components/product_card.html" with product=product %}
                </div>
                {% endfor %}
            </div>


            <!-- Pagination -->
            {% if products.paginator.num_pages > 1 %}
            <nav class="mt-4">
                <ul class="pagination">
                    {% if products.has_previous %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?{% if current_cat %}cat={{ current_cat.slug }}&{% endif %}{% if q %}q={{ q|urlencode }}&{% endif %}page={{ products.previous_page_number }}">Prev</a>
                    </li>
                    {% endif %}
                    {% for p in products.paginator.page_range %}
                    <li class="page-item {% if p == products.number %}active{% endif %}">
                        <a class="page-link"
                           href="?{% if current_cat %}cat={{ current_cat.slug }}&{% endif %}{% if q %}q={{ q|urlencode }}&{% endif %}page={{ p }}">{{
                            p }}</a>
                    </li>
                    {% endfor %}
                    {% if products.has_next %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?{% if current_cat %}cat={{ current_cat.slug }}&{% endif %}{% if q %}q={{ q|urlencode }}&{% endif %}page={{ products.next_page_number }}">Next</a>
                    </li>
                    {% endif %}
                </ul>
            </nav>
            {% endif %}
            {% else %}
            <div class="text-muted">No products found.</div>
            {% endif %}
        </div>
    </section>
</main>
